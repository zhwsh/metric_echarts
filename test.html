<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>ECharts</title>
    <!-- 引入 echarts.js -->
    <script src="echarts.min.js"></script>
    <script src="taffydb-master/taffy-min.js"></script>
    <script src="jfunk-0.0.1.js"></script>
    <script src="counter_sample_json.js"></script>
</head>
<body>
<!-- 为ECharts准备一个具备大小（宽高）的Dom -->
<div id="main" style="width: 600px;height:400px;"></div>
<script type="text/javascript">
    // 基于准备好的dom，初始化echarts实例
    var myChart = echarts.init(document.getElementById('main'));

    // 指定图表的配置项和数据
    var option = {
        title: {
            text: 'ECharts 入门示例'
        },
        tooltip: {},
        legend: {
            data: ['销量']
        },
        xAxis: {
            data: ["衬衫", "羊毛衫", "雪纺衫", "裤子", "高跟鞋", "袜子"]
        },
        yAxis: {},
        series: [{
            name: '销量',
            type: 'bar',
            data: [5, 20, 36, 10, 10, 20]
        }]
    };

    // 使用刚指定的配置项和数据显示图表。
    myChart.setOption(option);

    /*
    var metric = TAFFY(sample_data);
    var filter = metric({name: "bid.request"}).limit(2);
    filter.each(function (r) {
        alert(r.name + r.help)
    });
    console.log(filter.get());
    var histogram_filted = metric({type: 4, name: "bid.gateway_time"});
    var metric_h = histogram_filted.select("metric");
    var metric_name = histogram_filted.select("name");
    console.log(metric_name);
    console.log(metric_h);
*/

    var Food = {
        fruits: [{name: "Banana", color: "Yellow"}, {name: "Apple", color: "Red"}, {
            name: "Grapefruit",
            color: "Orange"
        }, {name: "Kiwi", color: "Green"}],
        vegetables: [{name: "Carrot", color: "Orange"}, {name: "Turnip", color: "Purple"}, {
            name: "Rutabaga",
            color: "Yellow"
        }, {name: "Sweet Potato", color: "Orange"}, {nama: "Sweet Potato", coloor: "Orange"}]
    };
    var jfq = jF("*[color=Orange]", Food).get();
    console.log(jfq);

    var sample = [
        {
            "name": "bid.request",
            "help": "How many request is this server recieved?",
            "type": 0,
            "metric": [
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        }
                    ],
                    "counter": {
                        "value": 652
                    }
                }
            ]
        },

        {
            "name": "bid.response",
            "help": "How many response is this server return",
            "type": 0,
            "metric": [
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "1"
                        },
                        {
                            "name": "business_type",
                            "value": "4"
                        },
                        {
                            "name": "match_type",
                            "value": "1"
                        },
                        {
                            "name": "op_type",
                            "value": "1"
                        }
                    ],
                    "counter": {
                        "value": 4
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "3"
                        },
                        {
                            "name": "business_type",
                            "value": "512"
                        },
                        {
                            "name": "match_type",
                            "value": "1"
                        },
                        {
                            "name": "op_type",
                            "value": "1"
                        }
                    ],
                    "counter": {
                        "value": 2
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "3"
                        },
                        {
                            "name": "business_type",
                            "value": "512"
                        },
                        {
                            "name": "match_type",
                            "value": "1"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 4
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "1"
                        },
                        {
                            "name": "business_type",
                            "value": "4"
                        },
                        {
                            "name": "match_type",
                            "value": "1"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 25
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "1"
                        },
                        {
                            "name": "business_type",
                            "value": "4"
                        },
                        {
                            "name": "match_type",
                            "value": "2"
                        },
                        {
                            "name": "op_type",
                            "value": "1"
                        }
                    ],
                    "counter": {
                        "value": 46
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "1"
                        },
                        {
                            "name": "business_type",
                            "value": "4"
                        },
                        {
                            "name": "match_type",
                            "value": "2"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 107
                    }
                }
            ]
        },
        {
            "name": "bid.noresponse",
            "help": "How many nobid response is this server return",
            "type": 0,
            "metric": [
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "3"
                        },
                        {
                            "name": "business_type",
                            "value": "512"
                        },
                        {
                            "name": "match_type",
                            "value": "1"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 1
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "op_type",
                            "value": "1"
                        }
                    ],
                    "counter": {
                        "value": 155
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "ad_type",
                            "value": "1"
                        },
                        {
                            "name": "business_type",
                            "value": "4"
                        },
                        {
                            "name": "match_type",
                            "value": "2"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 2
                    }
                },
                {
                    "label": [
                        {
                            "name": "ad_traffic_type",
                            "value": "52"
                        },
                        {
                            "name": "op_type",
                            "value": "2"
                        }
                    ],
                    "counter": {
                        "value": 305
                    }
                }
            ]
        }];
    //var query = jF("*[value=52]", sample);
    var query = jF("*[name=bid.response] > metric > counter", sample);
    var query_r = query.get();
    console.log(query_r);


</script>
</body>
</html>